{
  "hash": "4dc91a4e05072b26eb27caafd8f858e7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A Math Reference: Sample Modeling Equations to Borrow\"\nauthor: \"Luke Miratrix\"\neditor: \n  markdown: \n    wrap: sentence\n---\n\n\n\n\n\n\n\n\n## Introduction\n\nThis document has a bunch of mathematical equations we use in the class.\nIt is a good reference for how to write your own math equations in your life moving forward.\nGenerally, people write math equations using something called Latex.\nLatex (or Tex) is a way of writing documents where mixed in with the writing of what you want to say are commands (editorial markup, if you will) describing how you want your document to look.\nThis is a very powerful thing: there are Tex editors that allow you to write entire articles, books, reports, poetry, or whatever with extreme control over the typesetting used.\nIt creates beautifully typeset documents that are easy to distinguish from those written in, say, MS Word due to how they adjust whitespace on the page.\nThat being said, it can be a lot to jump in to.\n\nEnter R Markdown.\nR Markdown is a useful and easy way to take advantage of this syntax without the overhead of writing entire documents in Latex, even if you don't have any R code in your document.\nInside R Markdown you can write math equations, and then when you render the report, it not only runs all the R code, but it formats all the math for you as well!\nYou can even have R Markdown render to MS Word to give you a word doc with all your math equations ready to go.\n\n### Using this document\n\nYou are probably reading the PDF version of this document.\nBut really you should open the .Rmd file that generated this document, so you can cut and paste the relevant equations into your own work, and then modify as necessary.\nThe link to this file [here](https://raw.githubusercontent.com/lmiratrix/MLM/main/math_reference.qmd \"Rmd file of math equations\").\n\n## Overview of Using Latex\n\nFor math in your writing, you denote the beginning and the end of a math equation in your text using \"\\$\"s---one at the start and one at the stop.\nE.g., \"\\$ math stuff \\$\".\nMost greek letters are written as their names with a backslash \"\\\\\" just before it.\nE.g., \"\\\\alpha\".\n\nSo if I want to write an alpha, I write \"\\$\\\\alpha\\$\" and get $\\alpha$.\n\nI can do subscripts by using an underscore.\nE.g., \"\\$\\\\alpha_j\\$\" gives $\\alpha_j$.\nI can also do superscripts by using a hat.\nE.g., \"\\$\\\\alpha\\^2\\$\" gives $\\alpha^2$.\nTo put more than one character in a subscript (or superscript), put the stuff to be subscripted in curly braces, e.g., \"\\$\\\\alpha\\_{ij}\\$\" gives $\\alpha_{ij}$.\n\n\\newpage\n\n### Some useful greek letters\n\nHere are some useful greek letters and symbols\n\n|           Letter |             Name |\n|-----------------:|-----------------:|\n|         $\\alpha$ |          \\\\alpha |\n|          $\\beta$ |           \\\\beta |\n| $\\delta, \\Delta$ | \\\\delta, \\\\Delta |\n|       $\\epsilon$ |        \\\\epsilon |\n| $\\sigma, \\Sigma$ | \\\\sigma, \\\\Sigma |\n|           $\\rho$ |            \\\\rho |\n|            $\\mu$ |     \\\\mu (Meew!) |\n|           $\\tau$ |            \\\\tau |\n|         $\\times$ |          \\\\times |\n|           $\\sim$ |            \\\\sim |\n\nSee many more symbols at, e.g., <https://www.caam.rice.edu/~heinken/latex/symbols.pdf>.\nThis was found by searching \"tex symbols\" on Google.\n\n### Equations on lines by themselves\n\nTo write an equation on a line by itself, put the math stuff in between a pair of double \"\\$\".\nE.g., if we write:\n\n```         \n$$ Y = a X + b $$\n```\n\nWe get $$ Y = a X + b .$$\n\nIf we want multiple lines, we have to put our equation between a `\\begin{aligned}` and `\\end{aligned}` command and use a double backslash (\"\\\\\\\\\") to denote each line break (even if we have a line break we have to do this---we have to explicitly tell the program converting our raw text to nice formatted text where the line breaks are).\nFinally, inside the begin-end block of math, line things up with `&` symbols on each row of our equation.\nThe `&` symbols will be lined up vertically.\n\nSo if we write\n\n```         \n$$\n\\begin{aligned}\nY &= 10 X + 2 \\\\\nY - 5 &= 3 X^2 + 5\n\\end{aligned}\n$$\n```\n\nwe get $$\n\\begin{aligned}\nY &= 10 X + 2 \\\\\nY - 5 &= 3 X^2 + 5\n\\end{aligned}\n$$ Also consider:\n\n```         \n$$\n\\begin{aligned}\na + b + c + d &= c \\\\\n d &= e + f + g + h \n\\end{aligned}\n$$\n```\n\ngiving $$\n\\begin{aligned}\na + b + c + d &= c \\\\\n d &= e + f + g + h \n\\end{aligned}\n$$\n\n### Normal text in equations\n\nIf you put words in your equations, they get all italliced and weird, without their spaces:\n\n```         \n$$\n5 + my dog = 10\n$$\n```\n\n$$\n5 + my dog = 10\n$$\n\nYou can fix using the \"\\\\mbox{}\" command as so:\n\n```         \n$$\n5 + \\mbox{my dog} = 10\n$$\n```\n\n$$\n5 + \\mbox{my dog} = 10\n$$\n\nWe next walk through some latex code for the models you will most see.\n\n## Sample code: Random Intercept Model\n\nOur canonical Random Intercept model is as follows.\nFirst, our Level 1 model:\n\n```         \n$$\n\\begin{aligned}\ny_{ij} &= \\alpha_{j} + \\beta_{1} ses_{ij} +  \\epsilon_{ij} \\\\\n\\epsilon_{ij} &\\sim N( 0, \\sigma^2_y ) \\\\\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\ny_{ij} &= \\alpha_{j} + \\beta_{1} ses_{ij} +  \\epsilon_{ij} \\\\\n\\epsilon_{ij} &\\sim N( 0, \\sigma^2_y ) \\\\\n\\end{aligned}\n$$\n\nOur Level 2 model:\n\n```         \n$$\n\\begin{aligned}\n\\alpha_{j} &= \\gamma_{0} + \\gamma_{1} sector_j + u_{j} \\\\\nu_{j} &\\sim N( 0, \\sigma^2_\\alpha ) \\\\\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\n\\alpha_{j} &= \\gamma_{0} + \\gamma_{1} sector_j + u_{j} \\\\\nu_{j} &\\sim N( 0, \\sigma^2_\\alpha ) \\\\\n\\end{aligned}\n$$\n\nThe Gelman and Hill bracket notation looks like this:\n\n```         \n$$\n\\begin{aligned}\ny_{i} &= \\alpha_{j[i]} + \\beta_{1} ses_{i} +  \\epsilon_{i} \\\\\n\\epsilon_i &\\sim N( 0, \\sigma^2_y ) \\\\\n\\alpha_{j} &= \\gamma_{0} + \\gamma_{1} sector_j + u_{j} \\\\\nu_{j} &\\sim N( 0, \\sigma^2_\\alpha ) \\\\\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\ny_{i} &= \\alpha_{j[i]} + \\beta_{1} ses_{i} +  \\epsilon_{i} \\\\\n\\epsilon_i &\\sim N( 0, \\sigma^2_y ) \\\\\n\\alpha_{j} &= \\gamma_{0} + \\gamma_{1} sector_j + u_{j} \\\\\nu_{j} &\\sim N( 0, \\sigma^2_\\alpha ) \\\\\n\\end{aligned}\n$$\n\nThe reduced form would look like this:\n\n```         \n$$\ny_{i} = \\gamma_{0} + \\gamma_{1} sector_{j[i]} + \\beta_{1} ses_{i} + u_{j[i]} + \\epsilon_{i}\n$$\n```\n\n$$\ny_{i} = \\gamma_{0} + \\gamma_{1} sector_{j[i]} + \\beta_{1} ses_{i} + u_{j[i]} + \\epsilon_{i}\n$$\n\nwith\n\n```         \n$$\n\\epsilon_i \\sim N( 0, \\sigma^2_y ), \\mbox{ and } u_{j} \\sim N( 0, \\sigma^2_\\alpha )\n$$\n```\n\n$$\n\\epsilon_i \\sim N( 0, \\sigma^2_y ), \\mbox{ and } u_{j} \\sim N( 0, \\sigma^2_\\alpha )\n$$\n\nIf we want to be really prissy, we can write down the i.i.d. aspect of our random effects like this\n\n```         \n$$\n\\epsilon_i \\stackrel{i.i.d}{\\sim} N( 0, \\sigma^2_y ), \n\\mbox{ and } u_{j} \\stackrel{i.i.d}{\\sim} N( 0, \\sigma^2_\\alpha )\n$$\n```\n\n$$\n\\epsilon_i \\stackrel{i.i.d}{\\sim} N( 0, \\sigma^2_y ), \\\\\n\\mbox{ and } u_{j} \\stackrel{i.i.d}{\\sim} N( 0, \\sigma^2_\\alpha )\n$$ The `\\stackrel{}{}` command takes two bits of latex, each in the curly braces, and stacks them on top of each other.\n\n## Sample code: Random Slope Model\n\nThe canonical random slope model for HS&B with `ses` at level 1 and sector at level 2 involves a matrix for the pair of random effects.\nWe have to get a bit fancier with our TeX, therefore!\n\nLevel 1 models:\n\n```         \n$$\n\\begin{aligned}\ny_{ij} &= \\beta_{0j} + \\beta_{1j} ses_{ij} +  \\epsilon_{ij} \\\\\n\\epsilon_{ij} &\\sim N( 0, \\sigma^2_y ) \\\\\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\ny_{ij} &= \\beta_{0j} + \\beta_{1j} ses_{ij} +  \\epsilon_{ij} \\\\\n\\epsilon_{ij} &\\sim N( 0, \\sigma^2_y ) \\\\\n\\end{aligned}\n$$\n\nLevel 2 models:\n\n```         \n$$\n\\begin{aligned}\n\\beta_{0j} &= \\gamma_{00} + \\gamma_{01} sector_j + u_{0j} \\\\\n\\beta_{1j} &= \\gamma_{10} + \\gamma_{11} sector_j + u_{1j} \n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\n\\beta_{0j} &= \\gamma_{00} + \\gamma_{01} sector_j + u_{0j} \\\\\n\\beta_{1j} &= \\gamma_{10} + \\gamma_{11} sector_j + u_{1j} \n\\end{aligned}\n$$\n\nwith\n\n```         \n$$\n\\begin{pmatrix} u_{0j} \\\\\nu_{1j}\n\\end{pmatrix} \\sim  N\n\\begin{bmatrix}\n\\begin{pmatrix}\n0 \\\\\n0\n\\end{pmatrix}\\!\\!,&\n\\begin{pmatrix}\n\\tau_{00} & \\tau_{01}\\\\\n & \\tau_{11} \\\\\n\\end{pmatrix}\n\\end{bmatrix}\n$$\n```\n\n$$\n\\begin{pmatrix} u_{0j} \\\\\nu_{1j}\n\\end{pmatrix} \\sim  N\n\\begin{bmatrix}\n\\begin{pmatrix}\n0 \\\\\n0\n\\end{pmatrix}\\!\\!,&\n\\begin{pmatrix}\n\\tau_{00} & \\tau_{01}\\\\\n & \\tau_{11} \\\\\n\\end{pmatrix}\n\\end{bmatrix}\n$$\n\nThe TeX for the derivation of the reduced form is:\n\n```         \n$$\n\\begin{aligned}\ny_{ij} &= \\beta_{0j} + \\beta_{1j} ses_{ij} + \\epsilon_{ij}\\\\\n&= \\left( \\gamma_{00} + \\gamma_{01} sector_j + u_{0j} \\right)+ \\\\\\\n  (\\gamma_{10} + \\gamma_{11} sector_j + u_{1j}) ses_{ij} +  \\epsilon_{ij} \\\\\n&= \\gamma_{00} + \\gamma_{01} sector_j + u_{0j}  + \\gamma_{10}ses_{ij} + \\\\\n  \\gamma_{11} sector_j ses_{ij} + u_{1j} ses_{ij} +  \\epsilon_{ij}  \\\\\n&= \\gamma_{00} + \\gamma_{01} sector_j +  \\gamma_{10}ses_{ij} + \\\\\n  \\gamma_{11} sector_j ses_{ij} + \\left(u_{0j} + u_{1j} ses_{ij} + \\epsilon_{ij} \\right) \n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\ny_{ij} &= \\beta_{0j} + \\beta_{1j} ses_{ij} + \\epsilon_{ij}\\\\\n&= \\left( \\gamma_{00} + \\gamma_{01} sector_j + u_{0j} \\right)+ (\\gamma_{10} + \\gamma_{11} sector_j + u_{1j}) ses_{ij} +  \\epsilon_{ij} \\\\\n&= \\gamma_{00} + \\gamma_{01} sector_j + u_{0j}  + \\gamma_{10}ses_{ij} + \\gamma_{11} sector_j ses_{ij} + u_{1j} ses_{ij} +  \\epsilon_{ij}  \\\\\n&= \\gamma_{00} + \\gamma_{01} sector_j +  \\gamma_{10}ses_{ij} + \\gamma_{11} sector_j ses_{ij} + \\left(u_{0j} + u_{1j} ses_{ij} + \\epsilon_{ij} \\right) \n\\end{aligned}\n$$\n\n*Commentary:* There are various and competing ways of writing the covariance matrix for the random effects.\nThe $\\tau_{**}$ notation is easy and expands to any sized matrix (if we, for example, have more than one random slope).\nBut all the $\\tau_{**}$ are variances, not standard deviations, and we often like to talk about random effect variation in terms of standard deviations.\nWe can thus use something like this instead:\n\n```         \n$$\n\\begin{pmatrix} u_{0j} \\\\\nu_{1j}\n\\end{pmatrix} \\sim  N\n\\begin{bmatrix}\n\\begin{pmatrix}\n0 \\\\\n0\n\\end{pmatrix}\\!\\!,&\n\\begin{pmatrix}\n\\sigma^2_{0} & \\rho \\sigma_0 \\sigma_1 \\\\\n & \\sigma^2_{1} \\\\\n\\end{pmatrix}\n\\end{bmatrix}\n$$\n```\n\n$$\n\\begin{pmatrix} u_{0j} \\\\\nu_{1j}\n\\end{pmatrix} \\sim  N\n\\begin{bmatrix}\n\\begin{pmatrix}\n0 \\\\\n0\n\\end{pmatrix}\\!\\!,&\n\\begin{pmatrix}\n\\sigma^2_{0} & \\rho \\sigma_0 \\sigma_1 \\\\\n & \\sigma^2_{1} \\\\\n\\end{pmatrix}\n\\end{bmatrix}\n$$\n\nHere we have a correlation of random effects, $\\rho$, instead of a covariance, $\\tau_{01}$.\nAnd we can talk about the standard deviation of, e.g., the random intercepts, as $\\sigma_0$ rather than $\\sqrt{ \\tau_{00} }$.\nDifferent ways of writing the same mathematical thing are called different *parameterizations*; they are equivalent, but are more or less clear for different contexts.\\\nUnfortunately, this means there is no one right answer for how to write down a mathematical equation!\n\n## Summations and fancy stuff\n\nFractions are as follows:\n\n```         \n$$\ncor( A, B ) = \\frac{ cov( A, B ) }{ \\sigma_A \\sigma_B }\n$$\n```\n\n$$\ncor( A, B ) = \\frac{ cov( A, B ) }{ \\sigma_A \\sigma_B }\n$$\n\nFor reference, you can do summations and whatnot as follows:\n\n```         \n$$\nVar( Y_{i} ) = \\frac{1}{n-1} \\sum_{i=1}^n \\left( Y_{i} - \\bar{Y} \\right)^2 \n$$\n```\n\n$$\nVar( Y_{i} ) = \\frac{1}{n-1} \\sum_{i=1}^n \\left( Y_{i} - \\bar{Y} \\right)^2 \n$$\n\nAnd if you have fractions you can have big brackets with \"\\\\left(\" and \"\\\\right)\" as follows:\n\n```         \n$$\nX = \\left( \\frac{1}{2} + y \\right)\n$$\n```\n\n$$\nX = \\left( \\frac{1}{2} + y \\right)\n$$\n\nAnnoyingly, you always need a pair of these big brackets.\nIf you really don't want one, you use a backslash and a dot, like so:\n\n```         \n$$\nX = \\left( \\frac{1}{2} + y \\right.\n$$\n```\n\n$$\nX = \\left( \\frac{1}{2} + y \\right.\n$$\n\nThe rest you can find on StackOverflow or similar.\nOr perhaps have ChatGPT help you write your code!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}